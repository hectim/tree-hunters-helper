function shuffle(array) {
	var currentIndex = array.length, temporaryValue, randomIndex ;
	while (0 !== currentIndex){
		randomIndex = Math.floor(Math.random() * currentIndex);
		currentIndex -= 1;
		temporaryValue = array[currentIndex];
		array[currentIndex] = array[randomIndex];
		array[randomIndex] = temporaryValue;
	}
	return array;
}

var app = angular.module('flash', []);

app.run(function($rootScope){
	$rootScope.decks = [{name:"Math", cards: [  {front: '1*1', back: '1'},
												{front: '1*2', back: '2'},
												{front: '1*3', back: '3'},
												{front: '1*4', back: '4'},
												{front: '1*5', back: '5'},
												{front: '1*6', back: '6'},
												{front: '1*7', back: '7'},
												{front: '1*8', back: '8'},
												{front: '1*9', back: '9'},
												{front: '1*10', back: '10'},
												{front: '1*11', back: '11'},
												{front: '1*12', back: '12'},
												{front: '2*1', back: '2'},
												{front: '2*2', back: '4'},
												{front: '2*3', back: '6'},
												{front: '2*4', back: '8'},
												{front: '2*5', back: '10'},
												{front: '2*6', back: '12'},
												{front: '2*7', back: '14'},
												{front: '2*8', back: '16'},
												{front: '2*9', back: '18'},
												{front: '2*10', back: '20'},
												{front: '2*11', back: '22'},
												{front: '2*12', back: '24'},
												{front: '3*1', back: '3'},
												{front: '3*2', back: '6'},
												{front: '3*3', back: '9'},
												{front: '3*4', back: '12'},
												{front: '3*5', back: '15'},
												{front: '3*6', back: '18'},
												{front: '3*7', back: '21'},
												{front: '3*8', back: '24'},
												{front: '3*9', back: '27'},
												{front: '3*10', back: '30'},
												{front: '3*11', back: '33'},
												{front: '3*12', back: '36'},
												{front: '4*1', back: '4'},
												{front: '4*2', back: '8'},
												{front: '4*3', back: '12'},
												{front: '4*4', back: '16'},
												{front: '4*5', back: '20'},
												{front: '4*6', back: '24'},
												{front: '4*7', back: '28'},
												{front: '4*8', back: '32'},
												{front: '4*9', back: '36'},
												{front: '4*10', back: '40'},
												{front: '4*11', back: '44'},
												{front: '4*12', back: '48'},
												{front: '5*1', back: '5'},
												{front: '5*2', back: '10'},
												{front: '5*3', back: '15'},
												{front: '5*4', back: '20'},
												{front: '5*5', back: '25'},
												{front: '5*6', back: '30'},
												{front: '5*7', back: '35'},
												{front: '5*8', back: '40'},
												{front: '5*9', back: '45'},
												{front: '5*10', back: '50'},
												{front: '5*11', back: '55'},
												{front: '5*12', back: '60'},
												{front: '6*1', back: '6'},
												{front: '6*2', back: '12'},
												{front: '6*3', back: '18'},
												{front: '6*4', back: '24'},
												{front: '6*5', back: '30'},
												{front: '6*6', back: '36'},
												{front: '6*7', back: '42'},
												{front: '6*8', back: '48'},
												{front: '6*9', back: '54'},
												{front: '6*10', back: '60'},
												{front: '6*11', back: '66'},
												{front: '6*12', back: '72'},
												{front: '7*1', back: '7'},
												{front: '7*2', back: '14'},
												{front: '7*3', back: '21'},
												{front: '7*4', back: '28'},
												{front: '7*5', back: '35'},
												{front: '7*6', back: '42'},
												{front: '7*7', back: '49'},
												{front: '7*8', back: '56'},
												{front: '7*9', back: '63'},
												{front: '7*10', back: '70'},
												{front: '7*11', back: '77'},
												{front: '7*12', back: '84'},
												{front: '8*1', back: '8'},
												{front: '8*2', back: '16'},
												{front: '8*3', back: '24'},
												{front: '8*4', back: '32'},
												{front: '8*5', back: '40'},
												{front: '8*6', back: '48'},
												{front: '8*7', back: '56'},
												{front: '8*8', back: '64'},
												{front: '8*9', back: '72'},
												{front: '8*10', back: '80'},
												{front: '8*11', back: '88'},
												{front: '8*12', back: '96'},
												{front: '9*1', back: '9'},
												{front: '9*2', back: '18'},
												{front: '9*3', back: '27'},
												{front: '9*4', back: '36'},
												{front: '9*5', back: '45'},
												{front: '9*6', back: '54'},
												{front: '9*7', back: '63'},
												{front: '9*8', back: '72'},
												{front: '9*9', back: '81'},
												{front: '9*10', back: '90'},
												{front: '9*11', back: '99'},
												{front: '9*12', back: '108'},
												{front: '10*1', back: '10'},
												{front: '10*2', back: '20'},
												{front: '10*3', back: '30'},
												{front: '10*4', back: '40'},
												{front: '10*5', back: '50'},
												{front: '10*6', back: '60'},
												{front: '10*7', back: '70'},
												{front: '10*8', back: '80'},
												{front: '10*9', back: '90'},
												{front: '10*10', back: '100'},
												{front: '10*11', back: '110'},
												{front: '10*12', back: '120'},
												{front: '11*1', back: '11'},
												{front: '11*2', back: '22'},
												{front: '11*3', back: '33'},
												{front: '11*4', back: '44'},
												{front: '11*5', back: '55'},
												{front: '11*6', back: '66'},
												{front: '11*7', back: '77'},
												{front: '11*8', back: '88'},
												{front: '11*9', back: '99'},
												{front: '11*10', back: '110'},
												{front: '11*11', back: '121'},
												{front: '11*12', back: '132'},
												{front: '12*1', back: '12'},
												{front: '12*2', back: '24'},
												{front: '12*3', back: '36'},
												{front: '12*4', back: '48'},
												{front: '12*5', back: '60'},
												{front: '12*6', back: '72'},
												{front: '12*7', back: '84'},
												{front: '12*8', back: '96'},
												{front: '12*9', back: '108'},
												{front: '12*10', back: '120'},
												{front: '12*11', back: '132'},
												{front: '12*12', back: '144'}]},
						{name:"State Capitals", cards: [{front: 'Alabama', back: 'Montgomery'},
														{front: 'Alaska', back: 'Juneau'},
														{front: 'Arizona', back: 'Phoenix'},
														{front: 'Arkansas', back: 'Little Rock'},
														{front: 'California', back: 'Sacramento'},
														{front: 'Colorado', back: 'Denver'},
														{front: 'Connecticut', back: 'Hartford'},
														{front: 'Delaware', back: 'Dover'},
														{front: 'Florida', back: 'Tallahassee'},
														{front: 'Georgia', back: 'Atlanta'},
														{front: 'Hawaii', back: 'Honolulu'},
														{front: 'Idaho', back: 'Boise'},
														{front: 'Illinois', back: 'Springfield'},
														{front: 'Indiana', back: 'Indianapolis'},
														{front: 'Iowa', back: 'Des Moine'},
														{front: 'Kansas', back: 'Topeka'},
														{front: 'Kentucky', back: 'Frankfort'},
														{front: 'Louisiana', back: 'Baton Rouge'},
														{front: 'Maine', back: 'Augusta'},
														{front: 'Maryland', back: 'Annapolis'},
														{front: 'Massachusetts', back: 'Boston'},
														{front: 'Michigan', back: 'Lansing'},
														{front: 'Minnesota', back: 'St. Paul'},
														{front: 'Mississippi', back: 'Jackson'},
														{front: 'Missouri', back: 'Jefferson City'},
														{front: 'Montana', back: 'Helena'},
														{front: 'Nebraska', back: 'Lincoln'},
														{front: 'Nevada', back: 'Carson City'},
														{front: 'New Hampshire', back: 'Concord'},
														{front: 'New Jersey', back: 'Trenton'},
														{front: 'New Mexico', back: 'Santa Fe'},
														{front: 'New York', back: 'Albany'},
														{front: 'North Carolina', back: 'Raleigh'},
														{front: 'North Dakota', back: 'Bismark'},
														{front: 'Ohio', back: 'Columbus'},
														{front: 'Oklahoma', back: 'Oklahoma City'},
														{front: 'Oregon', back: 'Salem'},
														{front: 'Pennsylvania', back: 'Harrisburg'},
														{front: 'Rhode Island', back: 'Providence'},
														{front: 'South Carolina', back: 'Columbia'},
														{front: 'South Dakota', back: 'Pierre'},
														{front: 'Tennessee', back: 'Nashville'},
														{front: 'Texas', back: 'Austin'},
														{front: 'Utah', back: 'Salt Lake City'},
														{front: 'Vermont', back: 'Montpelier'},
														{front: 'Virginia', back: 'Richmond'},
														{front: 'Washington', back: 'Olympia'},
														{front: 'West Virgina', back: 'Charleston'},
														{front: 'Wisconsin', back: 'Madison'},
														{front: 'Wyoming', back: 'Cheyenne'}]},
					{name:"Presidents", cards: [{front: 'George Washington', back: '1789-1797'},
												{front: 'John Adams', back: '1797-1801'},
												{front: 'Thomas Jefferson', back: '1801-1809'},
												{front: 'James Madison', back: '1809-1817'},
												{front: 'James Monroe', back: '1817-1825'},
												{front: 'John Quincy Adams', back: '1825-1829'},
												{front: 'Andrew Jackson', back: '1829-1837'},
												{front: 'Martin Van Buren', back: '1837-1841'},
												{front: 'William Henry Harrison', back: '1841-1841'},
												{front: 'John Tyler', back: '1841-1845'},
												{front: 'James K. Polk', back: '1845-1849'},
												{front: 'Zachary Taylor', back: '1849-1850'},
												{front: 'Millard Fillmore', back: '1850-1853'},
												{front: 'Franklin Pierce', back: '1853-1857'},
												{front: 'James Buchanan', back: '1857-1861'},
												{front: 'Abraham Lincoln', back: '1861-1865'},
												{front: 'Andrew Johnson', back: '1865-1869'},
												{front: 'Ulysses S. Grant', back: '1869-1877'},
												{front: 'Rutherford B. Hayes', back: '1877-1881'},
												{front: 'James A. Garfield', back: '1881-1881'},
												{front: 'Chester A. Arthur', back: '1881-1885'},
												{front: 'Grover Cleveland', back: '1885-1889'},
												{front: 'Benjamin Harrison', back: '1889-1893'},
												{front: 'Grover Cleveland (2nd term)', back: '1893-1897'},
												{front: 'William McKinley', back: '1897-1901'},
												{front: 'Theodore Roosevelt', back: '1901-1909'},
												{front: 'William Howard Taft', back: '1909-1913'},
												{front: 'Woodrow Wilson', back: '1913-1921'},
												{front: 'Warren G. Harding', back: '1921-1923'},
												{front: 'Calvin Coolidge', back: '1923-1929'},
												{front: 'Herbert Hoover', back: '1929-1933'},
												{front: 'Franklin D. Roosevelt', back: '1933-1945'},
												{front: 'Harry S. Truman', back: '1945-1953'},
												{front: 'Dwight D. Eisenhower', back: '1953-1961'},
												{front: 'John F. Kennedy', back: '1961-1963'},
												{front: 'Lyndon B. Johnson', back: '1963-1969'},
												{front: 'Richard Nixon', back: '1969-1974'},
												{front: 'Gerald Ford', back: '1974-1977'},
												{front: 'Jimmy Carter', back: '1977-1981'},
												{front: 'Ronald Reagan', back: '1981-1989'},
												{front: 'George H. W. Bush', back: '1989-1993'},
												{front: 'Bill Clinton', back: '1993-2001'},
												{front: 'George W. Bush', back: '2001-2009'},
												{front: 'Barack Obama', back: '2009-Present'}]}
						];
	$rootScope.currentDeck = 0;
	$rootScope.front = true;
	$rootScope.currCard = 0;
	$rootScope.next = function(){
		if($rootScope.currCard === $rootScope.decks[$rootScope.currentDeck].cards.length-1){
			$rootScope.currCard = 0;
		} else{
			$rootScope.currCard++;
		}
		$rootScope.front = true;
	}
})

app.controller('menu', function($scope, $rootScope){
	$scope.cardDisplayed = 0;
	$scope.score = 0;

	$scope.shuffle = function(){
		shuffle($rootScope.decks[$rootScope.currentDeck].cards);
	}
	
	$scope.deckView = function($index){
		$rootScope.currentDeck = $index;
		$scope.cardDisplayed = 2;
	}

	$scope.cardView = function($index){
		$rootScope.currentDeck = $index;
		$scope.cardDisplayed = 1;
		$rootScope.currCard = 0;
		$rootScope.front = true;
		$scope.shuffle();
		$scope.score = 0;
	}

	$scope.homeView = function(){
		$scope.cardDisplayed = 0;
	}

	$scope.right = function(){
		$scope.score++;
		$rootScope.next();
	}

	$scope.wrong = function(){
		$rootScope.next();
	}
});

app.controller('card', function($scope, $rootScope){
	$scope.first = "";
	$scope.second = "";
	$scope.editing = false;

	$scope.getContent = function(){
		if($rootScope.front){
			return $rootScope.decks[$rootScope.currentDeck].cards[$rootScope.currCard].front;
		} else{
			return $rootScope.decks[$rootScope.currentDeck].cards[$rootScope.currCard].back;
		}
	};

	$scope.clickOn = function($event){
		if ($event.which === 1){
			$rootScope.front = !($rootScope.front);
		} else if($event.which === 2){
			if($rootScope.currCard === $rootScope.decks[$rootScope.currentDeck].cards.length-1){
				$rootScope.currCard = 0;
			} else{
				$rootScope.currCard++;
			}
			$rootScope.front = true;
		}
	};

	$scope.addCard = function(){
		if($scope.first.value !== undefined && $scope.first.value.length !== 0 && $scope.second.value !== undefined &&$scope.second.value.length !== 0){
			var n = {front:$scope.first.value,back:$scope.second.value};
			$rootScope.decks[$rootScope.currentDeck].cards.push(n);
			$scope.first = "";
			$scope.second = "";
		} else{
			console.log("dude... it's blank.");
		}
	};

	$scope.getDeck = function(){
		return $rootScope.decks[$rootScope.currentDeck].cards;
	};

	$scope.deleteCard = function($event, $index){
		$rootScope.decks[$rootScope.currentDeck].cards.splice($index,1);
		$rootScope.currCard = 0;
	}
	
	$scope.editCard = function($event, $index){
		$scope.editing = true;
	};

	$scope.getAction = function(){
		if($scope.editing){
			return "Edit";
		} else {
			return "Add";
		}
	}
});	
